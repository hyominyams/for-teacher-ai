# For Teacher AI - Project Rules (v2.0)

## 1. 프로젝트 개요 (Project Overview)
- **제품명**: For Teacher AI
- **목적**: 교사의 생활기록부 작성 효율을 극대화하는 AI 기반 작업 플랫폼.
- **Phase 1 집중 범위**: 행동특성 및 종합의견 생성 기능 구현 및 저장 시스템 구축.

## 2. 인터페이스 및 UX 규칙 (UI/UX Rules)
- **메인 대시보드 (`/app`)**:
  - 간결한 선택 허브 페이지. (철학적 랜딩 페이지보다 단순하게 구성)
  - 4대 서비스 카드 배치: 행동특성(활성), 교과세특/창체/업무문서(Waiting).
  - 하단 익스텐션 배너: 나이스 연동용 크롬 익스텐션 안내 및 링크.
- **작업 페이지 (`/app/behavior` 등)**:
  - **좌/우 분할 레이아웃**: 좌측(입력 및 설정), 우측(결과 카드) 각각 독립 스크롤.
  - **가시성 최우선**: 사용자가 800자 이상의 텍스트를 다루므로 대비율이 명확한 입력창과 카드 디자인 적용.

## 3. 기능 구현 규칙 (Functional Rules)
- **슬롯 관리**: 
  - 학생 수(1~40)에 따라 슬롯 동적 생성/삭제.
  - **번호 스왑(Swap)**: 번호가 자리값이므로, 교체 시 키워드와 결과를 통째로 교환.
  - **키워드**: 슬롯당 최소 2개 필수 입력 후 생성 가능.
- **생성 로직**: 
  - 슬롯 단위의 개별 API 호출 (`/api/generate`).
  - 진행 상태 실시간 UI 반영 (`i/N`).
- **데이터 저장**: 
  - `behavior` 카테고리별로 사용자 한 명당 하나의 최종 저장본(`JSONB`)을 Upsert 방식으로 유지.
  - 엑셀 다운로드 시 현재 화면의 최신 상태(수정본 포함)를 반영.

## 4. 데이터베이스 및 API (Data & API)
- **Table**: `saved_results`
  - `data` JSONB 구조: `students: array`, `options: object`, `metadata: object`.
  - 학생 실명 절대 저장 금지 (번호로만 식별).
- **Security**: Supabase RLS를 통한 사용자 본인 데이터 보호 필수.

## 5. 컴포넌트 개발 가이드
- **Design System**: 랜딩 페이지의 프리미엄 테마를 계승하되, 기능 페이지에서는 인터랙션 속도와 가독성을 상위 가치로 둠.
- **수동 편집**: AI 결과물은 언제든 수동 수정이 가능해야 하며, 수정 중에도 글자수 카운트가 즉시 반영되어야 함.

trigger: model_decision
